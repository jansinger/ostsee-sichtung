<!doctype html>
<html lang="de">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="%sveltekit.assets%/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Ostsee-Tiere - Marine Tiere melden</title>
		<meta
			name="description"
			content="Ostsee-Tiere - Melden Sie Ihre Wal- und Robbensichtung in der Ostsee. Helfen Sie der Meeresforschung mit Ihren Beobachtungen."
		/>
		<meta
			name="keywords"
			content="Ostsee-Tiere, Wal, Robbe, Sichtung, Ostsee, Meeresforschung, Schweinswal, Kegelrobbe, Baltic Sea, Marine Animals"
		/>
		<meta name="language" content="de" />
		<meta name="robots" content="index, follow" />
		<meta name="author" content="Deutsches Meeresmuseum" />
		<meta name="application-name" content="Ostsee-Tiere" />

		<!-- Security & Performance (iframe-freundlich) -->
		<meta http-equiv="X-Content-Type-Options" content="nosniff" />
		<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
		<meta name="format-detection" content="telephone=no" />

		<!-- Inline critical CSS to prevent FOUT -->
		<style nonce="%sveltekit.nonce%">
			/* Temporary font metrics for system fonts to match Inter */
			@supports (font-size-adjust: 1) {
				body {
					font-size-adjust: 0.545; /* Match Inter's x-height */
				}
			}
		</style>

		<!-- DNS Prefetch for external resources -->
		<link rel="dns-prefetch" href="//tile.openstreetmap.org" />
		<link rel="dns-prefetch" href="//tiles.openseamap.org" />

		<!-- Preconnect for critical resources -->
		<link rel="preconnect" href="https://tile.openstreetmap.org" crossorigin />
		<link rel="preconnect" href="https://tiles.openseamap.org" crossorigin />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:title" content="Ostsee-Tiere - Marine Tiere melden" />
		<meta property="og:site_name" content="Ostsee-Tiere" />
		<meta
			property="og:description"
			content="Ostsee-Tiere - Melden Sie Ihre Wal- und Robbensichtung in der Ostsee. Jede Beobachtung hilft der Meeresforschung."
		/>
		<meta property="og:image" content="/dmm-logo.png" />

		<!-- Twitter -->
		<meta property="twitter:card" content="summary" />
		<meta property="twitter:title" content="Ostsee-Tiere - Marine Tiere melden" />
		<meta
			property="twitter:description"
			content="Ostsee-Tiere - Melden Sie Ihre Wal- und Robbensichtung in der Ostsee."
		/>
		<meta property="twitter:image" content="/dmm-logo.png" />
		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover" class="iframe-mode">
		<div class="svelte-body">%sveltekit.body%</div>

		<!-- iframe-spezifische Funktionalität -->
		<script nonce="%sveltekit.nonce%">
			// Kommunikation mit Parent-Frame
			if (window.parent !== window) {
				// Benachrichtige Parent über Größenänderungen
				function notifyParentOfResize() {
					const height = document.body.scrollHeight;
					window.parent.postMessage(
						{
							type: 'resize',
							height: height,
							source: 'sichtungen-iframe'
						},
						'*'
					);
				}

				// ResizeObserver für automatische Größenanpassung
				if (window.ResizeObserver) {
					const resizeObserver = new ResizeObserver(notifyParentOfResize);
					resizeObserver.observe(document.body);
				}

				// Fallback mit regelmäßiger Prüfung
				setInterval(notifyParentOfResize, 1000);

				// Initial resize
				setTimeout(notifyParentOfResize, 100);
			}
		</script>
	</body>
</html>